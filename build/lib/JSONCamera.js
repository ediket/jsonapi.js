
'use strict';

var _ = require('lodash');
var addUnderscoreCollectionMethods = require('./addUnderscoreCollectionMethods');

var JSONCamera = function JSONCamera(target, transform) {

  this.target = target;
  this.snapshots = [];
  this.transform = transform;
};

_.extend(JSONCamera.prototype, {

  capture: function capture(options) {

    var object = this.target;
    if (this.transform) {
      object = this.transform(object);
    }

    this.snapshots.push(_.clone(_.extend(object, options), true));
  }

});

addUnderscoreCollectionMethods(JSONCamera, 'snapshots');

module.exports = JSONCamera;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvSlNPTkNhbWVyYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQ0EsWUFBWSxDQUFDOztBQUdiLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUMxQixJQUFJLDhCQUE4QixHQUFHLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDOztBQUdqRixJQUFJLFVBQVUsR0FBRyxvQkFBVSxNQUFNLEVBQUUsU0FBUyxFQUFFOztBQUU1QyxNQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztBQUNyQixNQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUNwQixNQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztDQUU1QixDQUFDOztBQUdGLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRTs7QUFFN0IsU0FBTyxFQUFFLGlCQUFVLE9BQU8sRUFBRTs7QUFFMUIsUUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztBQUN6QixRQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDbEIsWUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDakM7O0FBRUQsUUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQ2pCLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQ3pDLENBQUM7R0FFSDs7Q0FFRixDQUFDLENBQUM7O0FBR0gsOEJBQThCLENBQUMsVUFBVSxFQUFFLFdBQVcsQ0FBQyxDQUFDOztBQUd4RCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsQ0FBQyIsImZpbGUiOiJzcmMvbGliL0pTT05DYW1lcmEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbid1c2Ugc3RyaWN0JztcblxuXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xudmFyIGFkZFVuZGVyc2NvcmVDb2xsZWN0aW9uTWV0aG9kcyA9IHJlcXVpcmUoJy4vYWRkVW5kZXJzY29yZUNvbGxlY3Rpb25NZXRob2RzJyk7XG5cblxudmFyIEpTT05DYW1lcmEgPSBmdW5jdGlvbiAodGFyZ2V0LCB0cmFuc2Zvcm0pIHtcblxuICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgdGhpcy5zbmFwc2hvdHMgPSBbXTtcbiAgdGhpcy50cmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG5cbn07XG5cblxuXy5leHRlbmQoSlNPTkNhbWVyYS5wcm90b3R5cGUsIHtcblxuICBjYXB0dXJlOiBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gICAgdmFyIG9iamVjdCA9IHRoaXMudGFyZ2V0O1xuICAgIGlmICh0aGlzLnRyYW5zZm9ybSkge1xuICAgICAgb2JqZWN0ID0gdGhpcy50cmFuc2Zvcm0ob2JqZWN0KTtcbiAgICB9XG5cbiAgICB0aGlzLnNuYXBzaG90cy5wdXNoKFxuICAgICAgXy5jbG9uZShfLmV4dGVuZChvYmplY3QsIG9wdGlvbnMpLCB0cnVlKVxuICAgICk7XG5cbiAgfVxuXG59KTtcblxuXG5hZGRVbmRlcnNjb3JlQ29sbGVjdGlvbk1ldGhvZHMoSlNPTkNhbWVyYSwgJ3NuYXBzaG90cycpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gSlNPTkNhbWVyYTtcbiJdfQ==