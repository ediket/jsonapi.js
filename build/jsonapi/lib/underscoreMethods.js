'use strict';

var _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { 'default': obj }; };

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _import = require('lodash');

var _import2 = _interopRequireWildcard(_import);

var array = [];
var slice = array.slice;

var addMethod = function addMethod(length, method, attribute) {
  switch (length) {
    case 1:
      return function () {
        return _import2['default'][method](this[attribute]);
      };
    case 2:
      return function (value) {
        return _import2['default'][method](this[attribute], value);
      };
    case 3:
      return function (iteratee, context) {
        return _import2['default'][method](this[attribute], iteratee, context);
      };
    case 4:
      return function (iteratee, defaultVal, context) {
        return _import2['default'][method](this[attribute], iteratee, defaultVal, context);
      };
    default:
      return function () {
        var args = slice.call(arguments);
        args.unshift(this[attribute]);
        return _import2['default'][method].apply(_import2['default'], args);
      };
  }
};

var addUnderscoreMethods = function addUnderscoreMethods(Class, methods, attribute) {
  _import2['default'].each(methods, function (length, method) {
    if (_import2['default'][method]) Class.prototype[method] = addMethod(length, method, attribute);
  });
};

var collectionMethods = { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4,
  foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3,
  select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 2,
  contains: 2, invoke: 2, max: 3, min: 3, toArray: 1, size: 1, first: 3,
  head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,
  without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,
  isEmpty: 1, chain: 1, sample: 3, partition: 3 };

var addUnderscoreCollectionMethods = function addUnderscoreCollectionMethods(Collection, collectionMethods, attribute) {

  // Mix in each Underscore method as a proxy to `Collection#models`.
  addUnderscoreMethods(Collection, collectionMethods, attribute);

  // Underscore methods that take a property name as an argument.
  var attributeMethods = ['groupBy', 'countBy', 'sortBy', 'indexBy'];

  // Use attributes instead of properties.
  _import2['default'].each(attributeMethods, function (method) {
    if (!_import2['default'][method]) return;
    Collection.prototype[method] = function (value, context) {
      var iterator = _import2['default'].isFunction(value) ? value : function (model) {
        return model.get(value);
      };
      return _import2['default'][method](this.models, iterator, context);
    };
  });
};

// Underscore methods that we want to implement on the Model.
var modelMethods = { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,
  omit: 0, chain: 1, isEmpty: 1 };

var addUnderscoreModelMethods = function addUnderscoreModelMethods(Model, attributes) {

  // Mix in each Underscore method as a proxy to `Model#attributes`.
  addUnderscoreMethods(Model, modelMethods, attributes);
};

var addUnderscoreMethods;
exports.addUnderscoreMethods = addUnderscoreMethods;
var addUnderscoreModelMethods;
exports.addUnderscoreModelMethods = addUnderscoreModelMethods;
var addUnderscoreCollectionMethods;
exports.addUnderscoreCollectionMethods = addUnderscoreCollectionMethods;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qc29uYXBpL2xpYi91bmRlcnNjb3JlTWV0aG9kcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7O0FBRXRCLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLElBQUksS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7O0FBR3hCLElBQUksU0FBUyxHQUFHLG1CQUFTLE1BQU0sRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFO0FBQ2xELFVBQVEsTUFBTTtBQUNaLFNBQUssQ0FBQztBQUFFLGFBQU8sWUFBVztBQUN4QixlQUFPLG9CQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO09BQ25DLENBQUM7QUFBQSxBQUNGLFNBQUssQ0FBQztBQUFFLGFBQU8sVUFBUyxLQUFLLEVBQUU7QUFDN0IsZUFBTyxvQkFBRSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7T0FDMUMsQ0FBQztBQUFBLEFBQ0YsU0FBSyxDQUFDO0FBQUUsYUFBTyxVQUFTLFFBQVEsRUFBRSxPQUFPLEVBQUU7QUFDekMsZUFBTyxvQkFBRSxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQ3RELENBQUM7QUFBQSxBQUNGLFNBQUssQ0FBQztBQUFFLGFBQU8sVUFBUyxRQUFRLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRTtBQUNyRCxlQUFPLG9CQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQ2xFLENBQUM7QUFBQSxBQUNGO0FBQVMsYUFBTyxZQUFXO0FBQ3pCLFlBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDakMsWUFB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TSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztLQUNsRCxDQUFDO0dBQ0gsQ0FBQyxDQUFDO0NBRUosQ0FBQzs7O0FBSUYsSUFBSSxZQUFZLEdBQUcsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDO0FBQ2pFLE1BQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUM7O0FBR3BDLElBQUkseUJBQXlCLEdBQUcsbUNBQVUsS0FBSyxFQUFFLFVBQVUsRUFBRTs7O0FBRzNELHNCQUFvQixDQUFDLEtBQUssRUFBRSxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7Q0FFdkQsQ0FBQzs7QUFHSyxJQUFJLG9CQUFvQixDQUFDO1FBQXJCLG9CQUFvQixHQUFwQixvQkFBb0I7QUFDeEIsSUFBSSx5QkFBeUIsQ0FBQztRQUExQix5QkFBeUIsR0FBekIseUJBQXlCO0FBQzdCLElBQUksOEJBQThCLENBQUM7UUFBL0IsOEJBQThCLEdBQTlCLDhCQUE4QiIsImZpbGUiOiJzcmMvanNvbmFwaS9saWIvdW5kZXJzY29yZU1ldGhvZHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG52YXIgYXJyYXkgPSBbXTtcbnZhciBzbGljZSA9IGFycmF5LnNsaWNlO1xuXG5cbnZhciBhZGRNZXRob2QgPSBmdW5jdGlvbihsZW5ndGgsIG1ldGhvZCwgYXR0cmlidXRlKSB7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSk7XG4gICAgfTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIHZhbHVlKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSwgaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIH07XG4gICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oaXRlcmF0ZWUsIGRlZmF1bHRWYWwsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCBpdGVyYXRlZSwgZGVmYXVsdFZhbCwgY29udGV4dCk7XG4gICAgfTtcbiAgICBkZWZhdWx0OiByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzW2F0dHJpYnV0ZV0pO1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXS5hcHBseShfLCBhcmdzKTtcbiAgICB9O1xuICB9XG59O1xuXG5cbnZhciBhZGRVbmRlcnNjb3JlTWV0aG9kcyA9IGZ1bmN0aW9uKENsYXNzLCBtZXRob2RzLCBhdHRyaWJ1dGUpIHtcbiAgXy5lYWNoKG1ldGhvZHMsIGZ1bmN0aW9uKGxlbmd0aCwgbWV0aG9kKSB7XG4gICAgaWYgKF9bbWV0aG9kXSkgQ2xhc3MucHJvdG90eXBlW21ldGhvZF0gPSBhZGRNZXRob2QobGVuZ3RoLCBtZXRob2QsIGF0dHJpYnV0ZSk7XG4gIH0pO1xufTtcblxuXG52YXIgY29sbGVjdGlvbk1ldGhvZHMgPSB7IGZvckVhY2g6IDMsIGVhY2g6IDMsIG1hcDogMywgY29sbGVjdDogMywgcmVkdWNlOiA0LFxuICAgIGZvbGRsOiA0LCBpbmplY3Q6IDQsIHJlZHVjZVJpZ2h0OiA0LCBmb2xkcjogNCwgZmluZDogMywgZGV0ZWN0OiAzLCBmaWx0ZXI6IDMsXG4gICAgc2VsZWN0OiAzLCByZWplY3Q6IDMsIGV2ZXJ5OiAzLCBhbGw6IDMsIHNvbWU6IDMsIGFueTogMywgaW5jbHVkZTogMixcbiAgICBjb250YWluczogMiwgaW52b2tlOiAyLCBtYXg6IDMsIG1pbjogMywgdG9BcnJheTogMSwgc2l6ZTogMSwgZmlyc3Q6IDMsXG4gICAgaGVhZDogMywgdGFrZTogMywgaW5pdGlhbDogMywgcmVzdDogMywgdGFpbDogMywgZHJvcDogMywgbGFzdDogMyxcbiAgICB3aXRob3V0OiAwLCBkaWZmZXJlbmNlOiAwLCBpbmRleE9mOiAzLCBzaHVmZmxlOiAxLCBsYXN0SW5kZXhPZjogMyxcbiAgICBpc0VtcHR5OiAxLCBjaGFpbjogMSwgc2FtcGxlOiAzLCBwYXJ0aXRpb246IDMgfTtcblxuXG52YXIgYWRkVW5kZXJzY29yZUNvbGxlY3Rpb25NZXRob2RzID0gZnVuY3Rpb24gKENvbGxlY3Rpb24sIGNvbGxlY3Rpb25NZXRob2RzLCBhdHRyaWJ1dGUpIHtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBDb2xsZWN0aW9uI21vZGVsc2AuXG4gIGFkZFVuZGVyc2NvcmVNZXRob2RzKENvbGxlY3Rpb24sIGNvbGxlY3Rpb25NZXRob2RzLCBhdHRyaWJ1dGUpO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHRha2UgYSBwcm9wZXJ0eSBuYW1lIGFzIGFuIGFyZ3VtZW50LlxuICB2YXIgYXR0cmlidXRlTWV0aG9kcyA9IFsnZ3JvdXBCeScsICdjb3VudEJ5JywgJ3NvcnRCeScsICdpbmRleEJ5J107XG5cbiAgLy8gVXNlIGF0dHJpYnV0ZXMgaW5zdGVhZCBvZiBwcm9wZXJ0aWVzLlxuICBfLmVhY2goYXR0cmlidXRlTWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgaWYgKCFfW21ldGhvZF0pIHJldHVybjtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQpIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IF8uaXNGdW5jdGlvbih2YWx1ZSkgPyB2YWx1ZSA6IGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgIHJldHVybiBtb2RlbC5nZXQodmFsdWUpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBfW21ldGhvZF0odGhpcy5tb2RlbHMsIGl0ZXJhdG9yLCBjb250ZXh0KTtcbiAgICB9O1xuICB9KTtcblxufTtcblxuXG4vLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgTW9kZWwuXG52YXIgbW9kZWxNZXRob2RzID0geyBrZXlzOiAxLCB2YWx1ZXM6IDEsIHBhaXJzOiAxLCBpbnZlcnQ6IDEsIHBpY2s6IDAsXG4gICAgb21pdDogMCwgY2hhaW46IDEsIGlzRW1wdHk6IDEgfTtcblxuXG52YXIgYWRkVW5kZXJzY29yZU1vZGVsTWV0aG9kcyA9IGZ1bmN0aW9uIChNb2RlbCwgYXR0cmlidXRlcykge1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYE1vZGVsI2F0dHJpYnV0ZXNgLlxuICBhZGRVbmRlcnNjb3JlTWV0aG9kcyhNb2RlbCwgbW9kZWxNZXRob2RzLCBhdHRyaWJ1dGVzKTtcblxufTtcblxuXG5leHBvcnQgdmFyIGFkZFVuZGVyc2NvcmVNZXRob2RzO1xuZXhwb3J0IHZhciBhZGRVbmRlcnNjb3JlTW9kZWxNZXRob2RzO1xuZXhwb3J0IHZhciBhZGRVbmRlcnNjb3JlQ29sbGVjdGlvbk1ldGhvZHM7XG4iXX0=