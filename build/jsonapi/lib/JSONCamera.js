
'use strict';

var _ = require('lodash');
var addUnderscoreCollectionMethods = require('./addUnderscoreCollectionMethods');

var JSONCamera = function JSONCamera(target, transform) {

  this.target = target;
  this.snapshots = [];
  this.transform = transform;
};

_.extend(JSONCamera.prototype, {

  capture: function capture(options) {

    var object = this.target;
    if (this.transform) {
      object = this.transform(object);
    }

    this.snapshots.push(_.clone(_.extend(object, options), true));
  }

});

addUnderscoreCollectionMethods(JSONCamera, 'snapshots');

module.exports = JSONCamera;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qc29uYXBpL2xpYi9KU09OQ2FtZXJhLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSxZQUFZLENBQUM7O0FBR2IsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFCLElBQUksOEJBQThCLEdBQUcsT0FBTyxDQUFDLGtDQUFrQyxDQUFDLENBQUM7O0FBR2pGLElBQUksVUFBVSxHQUFHLG9CQUFVLE1BQU0sRUFBRSxTQUFTLEVBQUU7O0FBRTVDLE1BQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0FBQ3JCLE1BQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLE1BQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0NBRTVCLENBQUM7O0FBR0YsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsU0FBUyxFQUFFOztBQUU3QixTQUFPLEVBQUUsaUJBQVUsT0FBTyxFQUFFOztBQUUxQixRQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDO0FBQ3pCLFFBQUksSUFBSSxDQUFDLFNBQVMsRUFBRTtBQUNsQixZQUFNLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNqQzs7QUFFRCxRQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FDakIsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FDekMsQ0FBQztHQUVIOztDQUVGLENBQUMsQ0FBQzs7QUFHSCw4QkFBOEIsQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUM7O0FBR3hELE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxDQUFDIiwiZmlsZSI6InNyYy9qc29uYXBpL2xpYi9KU09OQ2FtZXJhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBhZGRVbmRlcnNjb3JlQ29sbGVjdGlvbk1ldGhvZHMgPSByZXF1aXJlKCcuL2FkZFVuZGVyc2NvcmVDb2xsZWN0aW9uTWV0aG9kcycpO1xuXG5cbnZhciBKU09OQ2FtZXJhID0gZnVuY3Rpb24gKHRhcmdldCwgdHJhbnNmb3JtKSB7XG5cbiAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gIHRoaXMuc25hcHNob3RzID0gW107XG4gIHRoaXMudHJhbnNmb3JtID0gdHJhbnNmb3JtO1xuXG59O1xuXG5cbl8uZXh0ZW5kKEpTT05DYW1lcmEucHJvdG90eXBlLCB7XG5cbiAgY2FwdHVyZTogZnVuY3Rpb24gKG9wdGlvbnMpIHtcblxuICAgIHZhciBvYmplY3QgPSB0aGlzLnRhcmdldDtcbiAgICBpZiAodGhpcy50cmFuc2Zvcm0pIHtcbiAgICAgIG9iamVjdCA9IHRoaXMudHJhbnNmb3JtKG9iamVjdCk7XG4gICAgfVxuXG4gICAgdGhpcy5zbmFwc2hvdHMucHVzaChcbiAgICAgIF8uY2xvbmUoXy5leHRlbmQob2JqZWN0LCBvcHRpb25zKSwgdHJ1ZSlcbiAgICApO1xuXG4gIH1cblxufSk7XG5cblxuYWRkVW5kZXJzY29yZUNvbGxlY3Rpb25NZXRob2RzKEpTT05DYW1lcmEsICdzbmFwc2hvdHMnKTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEpTT05DYW1lcmE7XG4iXX0=