'use strict';

var _interopRequireWildcard = function (obj) { return obj && obj.__esModule ? obj : { 'default': obj }; };

Object.defineProperty(exports, '__esModule', {
  value: true
});

var _import = require('lodash');

var _import2 = _interopRequireWildcard(_import);

var array = [];
var slice = array.slice;

var addMethod = function addMethod(length, method, attribute) {
  switch (length) {
    case 1:
      return function () {
        return _import2['default'][method](this[attribute]);
      };
    case 2:
      return function (value) {
        return _import2['default'][method](this[attribute], value);
      };
    case 3:
      return function (iteratee, context) {
        return _import2['default'][method](this[attribute], iteratee, context);
      };
    case 4:
      return function (iteratee, defaultVal, context) {
        return _import2['default'][method](this[attribute], iteratee, defaultVal, context);
      };
    default:
      return function () {
        var args = slice.call(arguments);
        args.unshift(this[attribute]);
        return _import2['default'][method].apply(_import2['default'], args);
      };
  }
};

var addUnderscoreMethods = function addUnderscoreMethods(Class, methods, attribute) {
  _import2['default'].each(methods, function (length, method) {
    if (_import2['default'][method]) Class.prototype[method] = addMethod(length, method, attribute);
  });
};

var collectionMethods = { forEach: 3, each: 3, map: 3, collect: 3, reduce: 4,
  foldl: 4, inject: 4, reduceRight: 4, foldr: 4, find: 3, detect: 3, filter: 3,
  select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 2,
  contains: 2, invoke: 2, max: 3, min: 3, toArray: 1, size: 1, first: 3,
  head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,
  without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,
  isEmpty: 1, chain: 1, sample: 3, partition: 3 };

var addUnderscoreCollectionMethods = function addUnderscoreCollectionMethods(Collection, collectionMethods, attribute) {

  // Mix in each Underscore method as a proxy to `Collection#models`.
  addUnderscoreMethods(Collection, collectionMethods, attribute);

  // Underscore methods that take a property name as an argument.
  var attributeMethods = ['groupBy', 'countBy', 'sortBy', 'indexBy'];

  // Use attributes instead of properties.
  _import2['default'].each(attributeMethods, function (method) {
    if (!_import2['default'][method]) return;
    Collection.prototype[method] = function (value, context) {
      var iterator = _import2['default'].isFunction(value) ? value : function (model) {
        return model.get(value);
      };
      return _import2['default'][method](this.models, iterator, context);
    };
  });
};

// Underscore methods that we want to implement on the Model.
var modelMethods = { keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,
  omit: 0, chain: 1, isEmpty: 1 };

var addUnderscoreModelMethods = function addUnderscoreModelMethods(Model, attributes) {

  // Mix in each Underscore method as a proxy to `Model#attributes`.
  addUnderscoreMethods(Model, modelMethods, attributes);
};

var addUnderscoreMethods;
exports.addUnderscoreMethods = addUnderscoreMethods;
var addUnderscoreModelMethods;
exports.addUnderscoreModelMethods = addUnderscoreModelMethods;
var addUnderscoreCollectionMethods;
exports.addUnderscoreCollectionMethods = addUnderscoreCollectionMethods;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9qc29uYXBpL2xpYi91bmRlcnNjb3JlTWV0aG9kLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7QUFDdEIsSUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2YsSUFBSSxLQUFLLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQzs7QUFHeEIsSUFBSSxTQUFTLEdBQUcsbUJBQVMsTUFBTSxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUU7QUFDbEQsVUFBUSxNQUFNO0FBQ1osU0FBSyxDQUFDO0FBQUUsYUFBTyxZQUFXO0FBQ3hCLGVBQU8sb0JBQUUsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7T0FDbkMsQ0FBQztBQUFBLEFBQ0YsU0FBSyxDQUFDO0FBQUUsYUFBTyxVQUFTLEtBQUssRUFBRTtBQUM3QixlQUFPLG9CQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztPQUMxQyxDQUFDO0FBQUEsQUFDRixTQUFLLENBQUM7QUFBRSxhQUFPLFVBQVMsUUFBUSxFQUFFLE9BQU8sRUFBRTtBQUN6QyxlQUFPLG9CQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7T0FDdEQsQ0FBQztBQUFBLEFBQ0YsU0FBSyxDQUFDO0FBQUUsYUFBTyxVQUFTLFFBQVEsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFO0FBQ3JELGVBQU8sb0JBQUUsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7T0FDbEUsQ0FBQztBQUFBLEFBQ0Y7QUFBUyxhQUFPLFlBQVc7QUFDekIsWUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNqQyxZQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO0FBQzlCLGVBQU8sb0JBQUUsTUFBTSxDQUFDLENBQUMsS0FBSyxzQkFBSSxJQUFJLENBQUMsQ0FBQztPQUNqQyxDQUFDO0FBQUEsR0FDSDtDQUNGLENBQUM7O0FBR0YsSUFBSSxvQkFBb0IsR0FBRyw4QkFBUyxLQUFLLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRTtBQUM3RCxzQkFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLFVBQVMsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUN2QyxRQUFJLG9CQUFFLE1BQU0sQ0FBQyxFQUFFLEtBQUssQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7R0FDL0UsQ0FBQyxDQUFDO0NBQ0osQ0FBQzs7QUFHRixJQUFJLGlCQUFpQixHQUFHLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQztBQUN4RSxPQUFLLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQztBQUM1RSxRQUFNLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQztBQUNuRSxVQUFRLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQztBQUNyRSxNQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQztBQUNoRSxTQUFPLEVBQUUsQ0FBQyxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxDQUFDO0FBQ2pFLFNBQU8sRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQzs7QUFHcEQsSUFBSSw4QkFBOEIsR0FBRyx3Q0FBVSxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsU0FBUyxFQUFFOzs7QUFHdkYsc0JBQW9CLENBQUMsVUFBVSxFQUFFLGlCQUFpQixFQUFFLFNBQVMsQ0FBQyxDQUFDOzs7QUFHL0QsTUFBSSxnQkFBZ0IsR0FBRyxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDOzs7QUFHbkUsc0JBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLFVBQVMsTUFBTSxFQUFFO0FBQ3hDLFFBQUksQ0FBQyxvQkFBRSxNQUFNLENBQUMsRUFBRSxPQUFPO0FBQ3ZCLGNBQVUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsVUFBUyxLQUFLLEVBQUUsT0FBTyxFQUFFO0FBQ3RELFVBQUksUUFBUSxHQUFHLG9CQUFFLFVBQVUsQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDM0QsZUFBTyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO09BQ3pCLENBQUM7QUFDRixhQUFPLG9CQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0tBQ2xELENBQUM7R0FDSCxDQUFDLENBQUM7Q0FFSixDQUFDOzs7QUFJRixJQUFJLFlBQVksR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDakUsTUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLEVBQUUsQ0FBQzs7QUFHcEMsSUFBSSx5QkFBeUIsR0FBRyxtQ0FBVSxLQUFLLEVBQUUsVUFBVSxFQUFFOzs7QUFHM0Qsc0JBQW9CLENBQUMsS0FBSyxFQUFFLFlBQVksRUFBRSxVQUFVLENBQUMsQ0FBQztDQUV2RCxDQUFDOztBQUdLLElBQUksb0JBQW9CLENBQUM7UUFBckIsb0JBQW9CLEdBQXBCLG9CQUFvQjtBQUN4QixJQUFJLHlCQUF5QixDQUFDO1FBQTFCLHlCQUF5QixHQUF6Qix5QkFBeUI7QUFDN0IsSUFBSSw4QkFBOEIsQ0FBQztRQUEvQiw4QkFBOEIsR0FBOUIsOEJBQThCIiwiZmlsZSI6InNyYy9qc29uYXBpL2xpYi91bmRlcnNjb3JlTWV0aG9kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbnZhciBhcnJheSA9IFtdO1xudmFyIHNsaWNlID0gYXJyYXkuc2xpY2U7XG5cblxudmFyIGFkZE1ldGhvZCA9IGZ1bmN0aW9uKGxlbmd0aCwgbWV0aG9kLCBhdHRyaWJ1dGUpIHtcbiAgc3dpdGNoIChsZW5ndGgpIHtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdKTtcbiAgICB9O1xuICAgIGNhc2UgMjogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXNbYXR0cmlidXRlXSwgdmFsdWUpO1xuICAgIH07XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuY3Rpb24oaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICAgIHJldHVybiBfW21ldGhvZF0odGhpc1thdHRyaWJ1dGVdLCBpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgfTtcbiAgICBjYXNlIDQ6IHJldHVybiBmdW5jdGlvbihpdGVyYXRlZSwgZGVmYXVsdFZhbCwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzW2F0dHJpYnV0ZV0sIGl0ZXJhdGVlLCBkZWZhdWx0VmFsLCBjb250ZXh0KTtcbiAgICB9O1xuICAgIGRlZmF1bHQ6IHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXNbYXR0cmlidXRlXSk7XG4gICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgIH07XG4gIH1cbn07XG5cblxudmFyIGFkZFVuZGVyc2NvcmVNZXRob2RzID0gZnVuY3Rpb24oQ2xhc3MsIG1ldGhvZHMsIGF0dHJpYnV0ZSkge1xuICBfLmVhY2gobWV0aG9kcywgZnVuY3Rpb24obGVuZ3RoLCBtZXRob2QpIHtcbiAgICBpZiAoX1ttZXRob2RdKSBDbGFzcy5wcm90b3R5cGVbbWV0aG9kXSA9IGFkZE1ldGhvZChsZW5ndGgsIG1ldGhvZCwgYXR0cmlidXRlKTtcbiAgfSk7XG59O1xuXG5cbnZhciBjb2xsZWN0aW9uTWV0aG9kcyA9IHsgZm9yRWFjaDogMywgZWFjaDogMywgbWFwOiAzLCBjb2xsZWN0OiAzLCByZWR1Y2U6IDQsXG4gICAgZm9sZGw6IDQsIGluamVjdDogNCwgcmVkdWNlUmlnaHQ6IDQsIGZvbGRyOiA0LCBmaW5kOiAzLCBkZXRlY3Q6IDMsIGZpbHRlcjogMyxcbiAgICBzZWxlY3Q6IDMsIHJlamVjdDogMywgZXZlcnk6IDMsIGFsbDogMywgc29tZTogMywgYW55OiAzLCBpbmNsdWRlOiAyLFxuICAgIGNvbnRhaW5zOiAyLCBpbnZva2U6IDIsIG1heDogMywgbWluOiAzLCB0b0FycmF5OiAxLCBzaXplOiAxLCBmaXJzdDogMyxcbiAgICBoZWFkOiAzLCB0YWtlOiAzLCBpbml0aWFsOiAzLCByZXN0OiAzLCB0YWlsOiAzLCBkcm9wOiAzLCBsYXN0OiAzLFxuICAgIHdpdGhvdXQ6IDAsIGRpZmZlcmVuY2U6IDAsIGluZGV4T2Y6IDMsIHNodWZmbGU6IDEsIGxhc3RJbmRleE9mOiAzLFxuICAgIGlzRW1wdHk6IDEsIGNoYWluOiAxLCBzYW1wbGU6IDMsIHBhcnRpdGlvbjogMyB9O1xuXG5cbnZhciBhZGRVbmRlcnNjb3JlQ29sbGVjdGlvbk1ldGhvZHMgPSBmdW5jdGlvbiAoQ29sbGVjdGlvbiwgY29sbGVjdGlvbk1ldGhvZHMsIGF0dHJpYnV0ZSkge1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYENvbGxlY3Rpb24jbW9kZWxzYC5cbiAgYWRkVW5kZXJzY29yZU1ldGhvZHMoQ29sbGVjdGlvbiwgY29sbGVjdGlvbk1ldGhvZHMsIGF0dHJpYnV0ZSk7XG5cbiAgLy8gVW5kZXJzY29yZSBtZXRob2RzIHRoYXQgdGFrZSBhIHByb3BlcnR5IG5hbWUgYXMgYW4gYXJndW1lbnQuXG4gIHZhciBhdHRyaWJ1dGVNZXRob2RzID0gWydncm91cEJ5JywgJ2NvdW50QnknLCAnc29ydEJ5JywgJ2luZGV4QnknXTtcblxuICAvLyBVc2UgYXR0cmlidXRlcyBpbnN0ZWFkIG9mIHByb3BlcnRpZXMuXG4gIF8uZWFjaChhdHRyaWJ1dGVNZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBpZiAoIV9bbWV0aG9kXSkgcmV0dXJuO1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgICAgdmFyIGl0ZXJhdG9yID0gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlIDogZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIG1vZGVsLmdldCh2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzLm1vZGVscywgaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH07XG4gIH0pO1xuXG59O1xuXG5cbi8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBNb2RlbC5cbnZhciBtb2RlbE1ldGhvZHMgPSB7IGtleXM6IDEsIHZhbHVlczogMSwgcGFpcnM6IDEsIGludmVydDogMSwgcGljazogMCxcbiAgICBvbWl0OiAwLCBjaGFpbjogMSwgaXNFbXB0eTogMSB9O1xuXG5cbnZhciBhZGRVbmRlcnNjb3JlTW9kZWxNZXRob2RzID0gZnVuY3Rpb24gKE1vZGVsLCBhdHRyaWJ1dGVzKSB7XG5cbiAgLy8gTWl4IGluIGVhY2ggVW5kZXJzY29yZSBtZXRob2QgYXMgYSBwcm94eSB0byBgTW9kZWwjYXR0cmlidXRlc2AuXG4gIGFkZFVuZGVyc2NvcmVNZXRob2RzKE1vZGVsLCBtb2RlbE1ldGhvZHMsIGF0dHJpYnV0ZXMpO1xuXG59O1xuXG5cbmV4cG9ydCB2YXIgYWRkVW5kZXJzY29yZU1ldGhvZHM7XG5leHBvcnQgdmFyIGFkZFVuZGVyc2NvcmVNb2RlbE1ldGhvZHM7XG5leHBvcnQgdmFyIGFkZFVuZGVyc2NvcmVDb2xsZWN0aW9uTWV0aG9kcztcbiJdfQ==